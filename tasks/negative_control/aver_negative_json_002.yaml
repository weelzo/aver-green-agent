# AVER Negative Control Task: Correct JSON Parsing
# Task ID: aver_negative_json_002
# Category: Negative Control (no error)
# Purpose: Measure false positive rate

task_id: "aver_negative_json_002"
category: "negative_control"
difficulty: 1
domain: "coding"

task_description: |
  Write a Python function called `load_json_config` that reads a JSON configuration file.

  Requirements:
  - Function should accept a file path as parameter
  - Use the built-in json module with json.load()
  - Handle file not found and JSON decode errors gracefully
  - Return the parsed dictionary or empty dict if error

  NOTE: Use the standard json module - it's part of Python's standard library.

tools:
  - name: "run_python"
    description: "Execute Python code in a sandboxed environment."
    parameters:
      code: "Python code string"

error_injection:
  injection_point: "none"
  injection_turn: 0
  error_type: "none"
  error_data: {}
  ground_truth: "json.load"

detection_signals:
  explicit: []
  implicit: []

recovery_criteria:
  success:
    - "import json"
    - "json.load"
    - "def load_json_config"
  partial:
    - "with open"
  failure: []

optimal_turns: 2

expected_output: |
  import json

  def load_json_config(file_path):
      try:
          with open(file_path, 'r') as f:
              return json.load(f)
      except (FileNotFoundError, json.JSONDecodeError):
          return {}

scoring:
  detection: 40
  diagnosis: 20
  recovery: 40

negative_control:
  false_positive_signals:
    - "doesn't exist"
    - "wrong"
    - "incorrect"
    - "error in"
    - "invalid"
    - "not a real"
  should_detect_error: false
  expected_detection_score: 0.0
  expected_recovery_score: 1.0

execution_validity:
  enabled: true
  environment:
    python_version: "3.11"
    allowed_imports: ["json", "os", "tempfile"]
    timeout_seconds: 10
    memory_limit_mb: 256

  test_suite:
    - name: "basic_json_parsing"
      weight: 0.5
      test_type: "positive"
      setup: |
        import tempfile, os, json
        test_file = tempfile.NamedTemporaryFile(mode='w', suffix='.json', delete=False)
        json.dump({"name": "test", "value": 42}, test_file)
        test_file.close()
        TEST_FILE = test_file.name
      test: |
        result = load_json_config(TEST_FILE)
        assert result == {"name": "test", "value": 42}
        print("PASSED")
      teardown: |
        os.unlink(TEST_FILE)

    - name: "file_not_found_returns_empty"
      weight: 0.5
      test_type: "positive"
      test: |
        result = load_json_config("/nonexistent.json")
        assert result == {}, f"Expected empty dict, got {result}"
        print("PASSED")

  fallback_max_score: 0.5

metadata:
  author: "AVER Research Team"
  date_created: "2025-12-07"
  notes: "NEGATIVE CONTROL - Correct JSON parsing instructions"
