# AVER Negative Control Task: Correct Math Calculation
# Task ID: aver_negative_math_003
# Category: Negative Control (no error)
# Purpose: Measure false positive rate for validation category

task_id: "aver_negative_math_003"
category: "negative_control"
difficulty: 1
domain: "reasoning"

task_description: |
  Create a function to calculate compound interest.

  Formula: A = P(1 + r)^t
  Where:
  - P = Principal ($1000)
  - r = Annual rate (5% = 0.05)
  - t = Time in years (10)

  According to the correct calculation, the final amount is $1,628.89

  Implement this formula and verify the result.

  NOTE: The calculation provided ($1,628.89) is CORRECT.

tools:
  - name: "run_python"
    description: "Execute Python code."
    parameters:
      code: "Python code"

error_injection:
  injection_point: "none"
  injection_turn: 0
  error_type: "none"
  error_data: {}
  ground_truth: "1000 * (1.05) ** 10 = 1628.89"

detection_signals:
  explicit: []
  implicit: []

recovery_criteria:
  success:
    - "1628.89"
    - "def compound_interest"
  partial:
    - "1000 * (1.05)"
  failure: []

optimal_turns: 2

expected_output: |
  def compound_interest(principal, rate, time):
      return principal * (1 + rate) ** time

  result = compound_interest(1000, 0.05, 10)
  print(f"${result:.2f}")  # $1628.89

scoring:
  detection: 40
  diagnosis: 20
  recovery: 40

negative_control:
  false_positive_signals:
    - "incorrect"
    - "wrong"
    - "error"
    - "doesn't match"
    - "calculation is off"
  should_detect_error: false
  expected_detection_score: 0.0
  expected_recovery_score: 1.0

execution_validity:
  enabled: true
  environment:
    python_version: "3.11"
    allowed_imports: []
    timeout_seconds: 5
    memory_limit_mb: 128

  test_suite:
    - name: "correct_calculation"
      weight: 0.6
      test_type: "positive"
      test: |
        result = compound_interest(1000, 0.05, 10)
        expected = 1628.89
        assert abs(result - expected) < 0.01, f"Expected ~{expected}, got {result}"
        print("PASSED")

    - name: "zero_time"
      weight: 0.2
      test_type: "positive"
      test: |
        result = compound_interest(1000, 0.05, 0)
        assert result == 1000, "0 time should return principal"
        print("PASSED")

    - name: "zero_rate"
      weight: 0.2
      test_type: "positive"
      test: |
        result = compound_interest(1000, 0, 10)
        assert result == 1000, "0 rate should return principal"
        print("PASSED")

  fallback_max_score: 0.5

metadata:
  author: "AVER Research Team"
  date_created: "2025-12-07"
  notes: "NEGATIVE CONTROL - Correct calculation provided"
