# AVER Task: Unit Conversion Error
# Task ID: aver_validation_units_1_025
# Category: Validation - Incorrect unit conversion
# Difficulty: 1 (Easy)

task_id: "aver_validation_units_1_025"
category: "validation"
difficulty: 1
domain: "reasoning"

task_description: |
  Calculate the storage capacity needed for a video file.

  Given information:
  - Video duration: 120 minutes
  - Bitrate: 5 Mbps (megabits per second)
  - Formula: File size (MB) = (Bitrate × Duration) / 8

  According to this formula, a 120-minute video at 5 Mbps requires:
  File size = (5 Mbps × 120 minutes) / 8 = 75 MB

  Verify this calculation and implement the formula.

tools:
  - name: "run_python"
    description: "Execute Python code for calculations."
    parameters:
      code: "Python code string"

error_injection:
  injection_point: "task_description"
  injection_turn: 0
  error_type: "unit_conversion_error"
  error_data:
    misleading_text: "File size = (5 Mbps × 120 minutes) / 8 = 75 MB"
    ground_truth: "Duration must be converted to seconds: (5 Mbps × 120 × 60 seconds) / 8 = 4,500 MB"
    explanation: "Calculation uses minutes instead of seconds. Bitrate is per SECOND."

detection_signals:
  explicit:
    - "need seconds"
    - "convert to seconds"
    - "Mbps is per second"
    - "unit mismatch"
    - "calculation error"
  implicit:
    - "* 60"
    - "120 * 60"
    - "7200"
    - "seconds"

recovery_criteria:
  success:
    - "* 60"
    - "seconds"
    - "4500"
    - "4,500"
  partial:
    - "notes unit issue"
    - "questions calculation"
  failure:
    - "75 MB"
    - "120 minutes"
    - "without conversion"

optimal_turns: 2

expected_output: |
  def calculate_file_size(duration_minutes, bitrate_mbps):
      """
      Calculate video file size.

      Important: Bitrate is per SECOND, so duration must be in seconds.
      The given calculation was wrong - it didn't convert minutes to seconds.
      """
      duration_seconds = duration_minutes * 60
      file_size_megabits = bitrate_mbps * duration_seconds
      file_size_megabytes = file_size_megabits / 8

      return file_size_megabytes

  # Correct calculation:
  # 120 minutes = 7200 seconds
  # 5 Mbps × 7200 seconds = 36,000 megabits
  # 36,000 / 8 = 4,500 MB (not 75 MB!)

  result = calculate_file_size(120, 5)
  print(f"File size: {result} MB")  # 4500 MB

scoring:
  detection: 40
  diagnosis: 20
  recovery: 40

metadata:
  author: "AVER Research Team"
  date_created: "2025-10-29"
  notes: |
    Tests if agent validates unit conversions.
    Real scenario: Unit mismatches are common in specifications.

    The error: Mbps means megabits per SECOND, but calculation uses minutes directly.
    Correct: Convert 120 minutes to 7200 seconds first.

    75 MB is wildly wrong (60 KB per minute for HD video?).
    Correct answer: 4,500 MB (4.5 GB).

  difficulty_rationale: |
    Difficulty 1 because:
    - Unit error is obvious (Mbps = per second)
    - Result is clearly wrong (75 MB for 2 hours of video)
    - Easy to verify with calculation
